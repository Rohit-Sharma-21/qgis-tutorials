<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Localizando la Instalación Más Cercana con Matriz Origen-Destino (QGIS3) &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../../index.html" />
    <link rel="next" title="Análisis de Área de Servicio usando Openrouteservice (QGIS3)" href="service_area_analysis.html" />
    <link rel="prev" title="Visualización y Enrutamiento Básico de Red (QGIS3)" href="basic_network_analysis.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><img src="../../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Haciendo un Mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Trabajando con atributos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importando Hojas de Cálculo o archivos CSV (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Estilo Básico Vectorial (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Calcular Longitudes y Estadísticas de Línea (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Estilos y Análisis Básicos Ráster (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mosaicar y Recortar Ráster (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_terrain.html">Trabajar con datos de terreno</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_wms.html">Trabajando con datos WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_projections.html">Trabajando con proyecciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenciar Hojas Topografícas y Mapas Escaneados (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferenciar Imágenes Aéreas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digitizing_basics.html">Digitalizar Datos del Mapa</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Realizar Uniones de Tablas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Realizar Uniones Espaciales (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Crear Mapas de Calor (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animar Datos de Series de Tiempo (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Manejar Geometrías No Válidas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Realizar Consultas Espaciales (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Análisis del vecino más cercano (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Muestrear Datos Ráster usando Puntos o Polígonos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interpolating_point_data.html">Interpolar Datos Punto</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Procesamiento por Lotes usando el Marco de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automatizar Flujos de Trabajo Complejos usando el Modelador de Procesos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automatización de la creación de mapas con el Atlas de diseñador de impresiones  (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Análisis de Sobreposición Multicriterio (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Visualización y Enrutamiento Básico de Red (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Localizando la Instalación Más Cercana con Matriz Origen-Destino (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Análisis de Área de Servicio usando Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_qgis_browser.html">Usando QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../open_bil_bip_bsq_files.html">Abrir archivos BIL, BIP o BSQ en QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Iniciándote con la Programación Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Ejecutar Algoritmos de Procesamiento vía Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Construyendo un Complemento Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Construyendo un Complemento de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Usando Funciones de Expresión Python Personalizadas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Escribir Scripts Python para el Marco de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Ejecutar y Programar Trabajos de Procesamiento QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performing_table_joins_pyqgis.html">Realización de uniones de tabla (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web_mapping_with_qgis2web.html">Mapeo web con QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creando Mapas Base con QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_plugins.html">Uso de complementos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Buscando y descargando datos de OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">Recursos de aprendizaje QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Créditos de los Conjuntos de Datos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Procesamiento por Lotes usando el Marco de Procesamiento (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="basic_network_analysis.html" title="Previous Chapter: Visualización y Enrutamiento Básico de Red (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Visualización...</span>
    </a>
  </li>
  <li>
    <a href="service_area_analysis.html" title="Next Chapter: Análisis de Área de Servicio usando Openrouteservice (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Análisis de Á... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>I have several full-length QGIS courses that are now completely free for self-study. 
Check out the <a href="https://courses.spatialthoughts.com/" target="_blank">Course Materials</a>.</p>

<hr>
<!-- EmailOctopus Form -->

<link rel="stylesheet"
      href="https://emailoctopus.com/bundles/emailoctopuslist/css/1.6/form.css"
>
<div class="emailoctopus-form-wrapper emailoctopus-form-default null"
     style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; color: rgb(26, 26, 26);"
>
  <h2 class="emailoctopus-heading">
    Subscribe to my list
  </h2>
  <p class="emailoctopus-success-message">
  </p>
  <p class="emailoctopus-error-message">
  </p>
  <form action="https://emailoctopus.com/lists/7325d131-1dbb-11eb-a3d0-06b4694bee2a/members/embedded/1.3s/add"
        method="post"
        data-message-success="Thanks for subscribing!"
        data-message-missing-email-address="Your email address is required."
        data-message-invalid-email-address="Your email address looks incorrect, please try again."
        data-message-bot-submission-error="This doesn't look like a human submission."
        data-message-consent-required="Please check the checkbox to indicate your consent."
        data-message-invalid-parameters-error="This form has missing or invalid fields."
        data-message-unknown-error="Sorry, an unknown error has occurred. Please try again later."
        class="emailoctopus-form"
        data-sitekey="6LdYsmsUAAAAAPXVTt-ovRsPIJ_IVhvYBBhGvRV6"
  >
    <div class="emailoctopus-form-row">
      <label for="field_0">
        Email address
      </label>
      <input id="field_0"
             name="field_0"
             type="email"
             placeholder
             required="required"
      >
    </div>
    <div aria-hidden="true"
         class="emailoctopus-form-row-hp"
    >
      <input type="text"
             name="hpc4b27b6e-eb38-11e9-be00-06b4694bee2a"
             tabindex="-1"
             autocomplete="nope"
      >
    </div>
    <div class="emailoctopus-form-row-subscribe">
      <input type="hidden"
             name="successRedirectUrl"
      >
      <button type="submit"
              style="background-color: rgb(224, 224, 224); color: rgb(0, 0, 0); font-family: inherit;"
      >
        Subscribe
      </button>
    </div>
  </form>
</div>
<script src="https://emailoctopus.com/bundles/emailoctopuslist/js/1.6/form-recaptcha.js">
</script>
<script src="https://emailoctopus.com/bundles/emailoctopuslist/js/1.6/form-embed.js">
</script>

<hr>


<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="locating-nearest-facility-with-origin-destination-matrix-qgis3">
<h1>Localizando la Instalación Más Cercana con Matriz Origen-Destino (QGIS3)<a class="headerlink" href="#locating-nearest-facility-with-origin-destination-matrix-qgis3" title="Enlazar permanentemente con este título">¶</a></h1>
<p>En el tutorial previo, <a class="reference internal" href="basic_network_analysis.html"><em>Visualización y Enrutamiento Básico de Red (QGIS3)</em></a>, aprendimos como construir una red y calcular la ruta más corta entre 2 puntos. Podemos aplicar esa técnica para varios tipos diferentes de análisis basado en red. Una de esas aplicaciones es el cálculo <strong>Matriz Origen-Destino</strong> o <strong>Matriz OD</strong>. Dado un conjunto de puntos de origen y otro conjunto de puntos destino, podemos calcular la ruta más corta entre cada par de origen-destino y averiguar la distancia/tiempo de viaje entre ellos. Tal análisis es útil para ubicar la instalación más cercana a un punto dado. Por ejemplo, la empresa de logística puede usar este análisis para encontrar el almacen más cercano a sus clientes para optimizar las rutas de entrega. Aquí usaremos el algoritmo Matriz de Distancia del complemento <strong>QGIS Network Analysis Toolbox (QNEAT3)</strong> para encontrar la instalación de salud más cercana a cada dirección en la ciudad.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Este tutorial muestra como usar tus propios datos de red para calcular una matriz origen-destino. Si no tienes tus propios datos de red, puedes usar <strong>Complemento ORS Tools</strong> y el algoritmo <span class="menuselection">ORS Tools ‣ Matriz ‣ Matriz desde Capas</span> para hacer el análisis similar usando datos OpenStreetMap. Vea  <a class="reference internal" href="service_area_analysis.html"><em>Análisis de Área de Servicio usando Openrouteservice (QGIS3)</em></a> para aprender como usar el complemento ORS Tools.</p>
</div>
<div class="section" id="overview-of-the-task">
<h2>Vista general de la tarea<a class="headerlink" href="#overview-of-the-task" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Tomaremos 2 capas para Washington DC - una con puntos que representan direcciones y otra con puntos que representan instalaciones de salud mental - y averiguaremos la instalación con la menor distancia de viaje para cada dirección.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Otras habilidades que aprenderá<a class="headerlink" href="#other-skills-you-will-learn" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p class="first">Extraer una muestra aleatoria estratificada de una capa punto.</p>
</li>
<li><p class="first">Usar Capas Virtuales para ejecutar una consulta SQL en una capa QGIS.</p>
</li>
<li><p class="first">Usar Editor de Consola de Python para ejecutar un script pyqgis.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Obtener los datos<a class="headerlink" href="#get-the-data" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El gobierno del Distrito de Columbia comparte libremente cientos de conjuntos de datos en el <a class="reference external" href="https://opendata.dc.gov/">Catálogo de Datos Abiertos</a>.</p>
<p>Descargue las siguientes capas de datos como archivos shape.</p>
<ul class="simple">
<li><p class="first"><a class="reference external" href="https://opendata.dc.gov/datasets/street-centerlines">Líneas Centrales de Calle</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://opendata.dc.gov/datasets/address-points">Puntos de Direcciones</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://opendata.dc.gov/datasets/adult-mental-health-providers">Proveedores de Salud Mental para Adultos</a></p>
</li>
</ul>
<p>Para su comodidad, puede descargar directamente una copia de los conjuntos de datos de los enlaces abajo:</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/Street_Centerlines.zip">Street_Centerlines.zip</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/Address_Points.zip">Address_Points.zip</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/Adult_Mental_Health_Providers.zip">Adult_Mental_Health_Providers.zip</a></p>
<p>Fuente de Datos: <a class="reference internal" href="../credits.html#dcopendata" id="id1">[DCOPENDATA]</a></p>
</div>
<div class="section" id="setup">
<h2>Configuración<a class="headerlink" href="#setup" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Visite <span class="menuselection">Complementos ‣ Administrar e Instalar complementos</span>. Busque el complemento <strong>QNEAT3</strong> e instálelo. Clic en <span class="guilabel">Cerrar</span>.</p>
<img alt="../../_images/setup12.png" class="align-center" src="../../_images/setup12.png" />
</div>
<div class="section" id="procedure">
<h2>Procedimiento<a class="headerlink" href="#procedure" title="Enlazar permanentemente con este título">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">Localice el archivo descargado <code class="docutils literal"><span class="pre">Street_Centerlines.zip</span></code> en el panel <span class="guilabel">Explorador</span>. Expándalo y arrastre el archivo <code class="docutils literal"><span class="pre">Street_Centerlines.shp</span></code> a la pantalla. De forma similar, localice el archivo <code class="docutils literal"><span class="pre">Adult_Mental_Health_Providers.zip</span></code>, expándalo y agregue <code class="docutils literal"><span class="pre">Adult_Mental_Health_Providers.shp</span></code> a la pantalla.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1101.png" class="align-center" src="../../_images/1101.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p class="first">A continuación, localice el archivo <code class="docutils literal"><span class="pre">Address_Points.zip</span></code>, expándalo y agregue <code class="docutils literal"><span class="pre">Address_Points.shp</span></code>. Verá bastantes puntos alrededor de la ciudad. Cada punto representa una dirección válida. No seleccionaremos aleatoriamente 1 punto en cada distrito para usarlo como puntos de origen. Esta técnica es llamada muestreo estratificado. Vaya a <span class="menuselection">Procesos ‣ Caja de Herramientas</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/247.png" class="align-center" src="../../_images/247.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p class="first">Busque y localice el algoritmo <span class="menuselection">Selección de Vector ‣ Extracción aleatoria dentro de subconjuntos</span></p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/332.png" class="align-center" src="../../_images/332.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p class="first">Seleccione <code class="docutils literal"><span class="pre">Address_Points</span></code> como la <span class="guilabel">Capa de Entrada</span>. Cada punto de dirección contiene un atributo llamado <code class="docutils literal"><span class="pre">WARD_2012</span></code> que tiene el número de distrito asociado con la dirección. Como queremos sólo 1 punto por distrito, usaremos ese atributo como el <span class="guilabel">ID field</span>. Defina <span class="guilabel">Número/porcentaje de entidades seleccionadas</span> como <code class="docutils literal"><span class="pre">1</span></code>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/417.png" class="align-center" src="../../_images/417.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p class="first">Se agregará una nueva capa <code class="docutils literal"><span class="pre">Extraído</span> <span class="pre">(estratificado</span> <span class="pre">aleatorio)</span></code> al panel <span class="guilabel">Capas</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/517.png" class="align-center" src="../../_images/517.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p class="first">Desactive la visibilidad para la capa <code class="docutils literal"><span class="pre">Address_Points</span></code>. Clic-derecho en la capa <code class="docutils literal"><span class="pre">Extraído</span> <span class="pre">(estratificado</span> <span class="pre">aleatorio)</span></code> y seleccione <span class="guilabel">Renombrar capa</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/617.png" class="align-center" src="../../_images/617.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p class="first">Renombremos esta capa como <code class="docutils literal"><span class="pre">origin_points</span></code>. De forma similar, renombre la capa <code class="docutils literal"><span class="pre">Adult_Mental_Health_Providers</span></code> que representa las instalaciones sanitarias como <code class="docutils literal"><span class="pre">destination_points</span></code>. Nombrando de esta manera las capas facilita identificarlas en el procesamiento posterior. Vaya a <span class="menuselection">Procesos ‣ Caja de herramientas</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/716.png" class="align-center" src="../../_images/716.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p class="first">Localice el algoritmo <span class="menuselection">QNEAT3 ‣ Matrices de distancia ‣ OD Matrix from Layers as Table (m:n)</span>. Si no ve este algoritmo en la caja de herramientas, asegúrese que tiene instalado el complemento <strong>QNEAT3</strong>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/816.png" class="align-center" src="../../_images/816.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p class="first">Este algoritmo ayuda a encontrar las distancias a lo largo de la red entre el origen seleccionado y las capas destino. Seleccione <code class="docutils literal"><span class="pre">Street_Centerlines</span></code> como la <span class="guilabel">Capa de red</span>. Seleccione <code class="docutils literal"><span class="pre">origin_points</span></code> como la <span class="guilabel">Capa de puntos Desde</span> y <code class="docutils literal"><span class="pre">OBJECTID</span></code> como el <span class="guilabel">Campo ID único de punto</span>. De forma similar, defina <code class="docutils literal"><span class="pre">destination_points</span></code> como la <span class="guilabel">Capa de punto Hacia</span> y <code class="docutils literal"><span class="pre">OBJECTID</span></code>  como el <span class="guilabel">Campo ID único de punto</span>. Defina el <span class="guilabel">Criterio de Optimización</span> como <code class="docutils literal"><span class="pre">Ruta</span> <span class="pre">más</span> <span class="pre">corta</span></code>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/916.png" class="align-center" src="../../_images/916.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p class="first">Como varias calles en la red son de sentido único, necesitaremos definir los <span class="guilabel">Parámetros avanzados</span> para especificar la dirección. Vea <a class="reference internal" href="basic_network_analysis.html"><em>Visualización y Enrutamiento Básico de Red (QGIS3)</em></a> para más detalles sobre cómo están estructurados estos atributos. Elija <code class="docutils literal"><span class="pre">DIRECTIONA</span></code> como el <span class="guilabel">Campo dirección</span>. Ingrese <code class="docutils literal"><span class="pre">Sentido</span> <span class="pre">Único</span> <span class="pre">(dirección</span> <span class="pre">Digitalización)</span></code> como el <span class="guilabel">Valor para la dirección hacia adelante</span>  y <code class="docutils literal"><span class="pre">Sentido</span> <span class="pre">Único</span> <span class="pre">(contrario</span> <span class="pre">a</span> <span class="pre">dirección</span> <span class="pre">Digitalización)</span></code> como el <span class="guilabel">Valor para la dirección hacia atrás</span>. Mantenga las otras opciones en sus valores predeterminados y clic en <span class="guilabel">Ejecutar</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1016.png" class="align-center" src="../../_images/1016.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p class="first">Será agregada una nueva tabla llamada <code class="docutils literal"><span class="pre">Output</span> <span class="pre">OD</span> <span class="pre">Matrix</span></code> al panel <span class="guilabel">Capas</span>. Clic-derecho y seleccione <span class="guilabel">Abrir Tabla de Atributos</span>. Verá que la tabla contiene <em>117</em> filas. Teníamos 9 puntos de origen y 13 puntos destino - por lo que la salida contiene <em>9x13 = 117</em> pares de orígenes y destinos. La columna <code class="docutils literal"><span class="pre">total_cost</span></code> contiene distancia en metros entre cada punto de origen y cada punto destino.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1119.png" class="align-center" src="../../_images/1119.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p class="first">Para este tutorial, estamos interesados sólo en el punto de destino con la distancia más corta. Podemos crear una consulta SQL para escoger el destino con el <code class="docutils literal"><span class="pre">total_cost</span></code> menor entre todos los destinos. Vaya a <span class="menuselection">Base de Datos ‣ DB Manager..</span></p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1217.png" class="align-center" src="../../_images/1217.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p class="first">En el diálogo <span class="guilabel">DB Manager</span>, seleccione el <span class="menuselection">Capas Virtuales ‣ capas Proyecto ‣ Output OD Matrix</span> del panel a mano izquierda. Vea la documentación <a class="reference external" href="https://docs.qgis.org/testing/en/docs/user_manual/working_with_vector/virtual_layers.html">Capas virtuales</a> para aprender más. Clic en el botón <span class="guilabel">Ventana SQL</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1316.png" class="align-center" src="../../_images/1316.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p class="first">Ingrese la siguiente consulta y clic en <span class="guilabel">Ejecutar</span>. Los resultados serán mostrados en el panel abajo. Como se espera, tenemos 9 filas en el resultado - el destino de ruta más corta para cada punto de origen. Marque y seleccione la <span class="guilabel">Columna con valores únicos</span> como <code class="docutils literal"><span class="pre">origin_id</span></code>. Ingrese <code class="docutils literal"><span class="pre">nearest_destinations</span></code> como el <span class="guilabel">Nombre de capa (prefijo)</span>. Clic <span class="guilabel">Cargar</span>.</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre><span></span>select origin_id, destination_id, min(total_cost) as shortest_distance
from &#39;Output OD Matrix&#39; group by origin_id
</pre></div>
</div>
<img alt="../../_images/1415.png" class="align-center" src="../../_images/1415.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p class="first">Se agregará una nueva capa <code class="docutils literal"><span class="pre">nearest_destinations</span></code> al panel <span class="guilabel">Capas</span>. Esta tabla tiene el resultado de nuestro análisis. El centro de salud mental más cercano para cada uno de los 9 puntos de origen. Intentemos unas pocas maneras diferentes para visualizar y validar estos resultados. Vaya a <span class="menuselection">Procesos ‣ Caja de herramientas</span>. Busque y localice el algoritmo <span class="menuselection">Unir atributos por valor de campo</span>. Haga doble-clic para iniciarlo.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1514.png" class="align-center" src="../../_images/1514.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p class="first">Seleccione <code class="docutils literal"><span class="pre">origin_points</span></code> como la <span class="guilabel">Capa de entrada</span> y <code class="docutils literal"><span class="pre">OBJECTID</span></code> como el <span class="guilabel">Campo tabla</span>. Defina <code class="docutils literal"><span class="pre">nearest_destinations</span></code> como la <span class="guilabel">Capa entrada 2</span> y <code class="docutils literal"><span class="pre">origin_id</span></code> como el <span class="guilabel">Campo tabla 2</span>. Clic el botón <span class="guilabel">...</span> junto a <span class="guilabel">Campos capa 2 a copiar</span> y seleccione <code class="docutils literal"><span class="pre">destination_id</span></code> y <code class="docutils literal"><span class="pre">shortes_distance</span></code>. Clic en <span class="guilabel">Ejecutar</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1613.png" class="align-center" src="../../_images/1613.png" />
</div></blockquote>
<ol class="arabic simple" start="17">
<li><p class="first">Se agregará una nueva <code class="docutils literal"><span class="pre">Joined</span> <span class="pre">layer</span></code> al panel <span class="guilabel">Capas</span>. Esta capa tiene el atributo id del destino más cercano para cada punto de origen. Ahora podemos crear una visualización eje-radios usando esta capa. Busque el algoritmo <span class="menuselection">Análisis de vector ‣ Unir por líneas (líneas de eje)</span>. Clic-derecho para iniciarlo.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1714.png" class="align-center" src="../../_images/1714.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p class="first">Seleccione <code class="docutils literal"><span class="pre">destination_points</span></code> como la <span class="guilabel">Capa de ejes</span> y <code class="docutils literal"><span class="pre">OBJECTID</span></code> como el <span class="guilabel">Campo ID de ejes</span>. Seleccione <code class="docutils literal"><span class="pre">Joined</span> <span class="pre">layer`</span> <span class="pre">como</span> <span class="pre">la</span> <span class="pre">:guilabel:`Capa</span> <span class="pre">de</span> <span class="pre">radios`</span> <span class="pre">y</span> <span class="pre">``destination_id</span></code> como el <span class="guilabel">Campo ID de radios</span>. Clic en <span class="guilabel">Ejecutar</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1813.png" class="align-center" src="../../_images/1813.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p class="first">Una vez que termine el proces, se agregará una nueva capa <code class="docutils literal"><span class="pre">Hub</span> <span class="pre">lines</span></code> al panel <span class="guilabel">Capas</span>. Esta capa muestra las línea que conectan cada origen con el destino más cercano.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1911.png" class="align-center" src="../../_images/1911.png" />
</div></blockquote>
<ol class="arabic simple" start="20">
<li><p class="first">Note que a pesar de que las líneas que conectan el origen y el destino son rectas, el destino fue encontrado usando la distancia a lo largo de la red. Será una visualización más útil mostrar la ruta más corta real entre cada origen-destino. Al momento, no existe una manera fácil para general la ruta más corta entre múltiples pares origen-destino de la manera como generamos la matriz de distancia. Pero demostraré una manera para usar algo de script python para generar esta visualización. Primero, ejecutemos el algoritmo de la ruta más corta en 1 par. Localice el algoritmo <span class="menuselection">QNEAT3 ‣ Enrutamiento ‣ Ruta más corta (punto a punto)</span> e inícielo.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/209.png" class="align-center" src="../../_images/209.png" />
</div></blockquote>
<ol class="arabic simple" start="21">
<li><p class="first">En el diálogo <span class="guilabel">Ruta más corta (Punto a Punto)</span>, seleccione <code class="docutils literal"><span class="pre">Street_Centerlines</span></code> como la <span class="guilabel">Capa vectorial que representa la red</span>. Mantenga la <span class="guilabel">Tipo de ruta a calcular</span> como <code class="docutils literal"><span class="pre">Más</span> <span class="pre">corto</span></code>. A continuación, necesitamos escoger un punto de inicio y final. Puede hacer clic en el botón <span class="guilabel">...</span> junto a <span class="guilabel">Punto de inicio</span> y clic en el punto de origen en el lienzo. De forma similar, seleccione el punto destino como el <span class="guilabel">Punto final</span>. Expanda la sección <span class="guilabel">Parámetros avanzados</span>. Elija <code class="docutils literal"><span class="pre">DIRECTIONA</span></code> como el <span class="guilabel">Campo de sentido</span>. Ingrese <code class="docutils literal"><span class="pre">One</span> <span class="pre">Way</span> <span class="pre">(Digitizing</span> <span class="pre">direction)</span></code> como el <span class="guilabel">Valor para sentido de avance</span> y <code class="docutils literal"><span class="pre">One</span> <span class="pre">way</span> <span class="pre">(Against</span> <span class="pre">digitizing</span> <span class="pre">direction)</span></code> como el <span class="guilabel">Valor para dirección hacia atrás</span>. Mantenga las otras opciones en sus valores predeterminados y clic en <span class="guilabel">Ejecutar</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/2114.png" class="align-center" src="../../_images/2114.png" />
</div></blockquote>
<ol class="arabic simple" start="22">
<li><p class="first">Una nueva capa <code class="docutils literal"><span class="pre">Shortes</span> <span class="pre">Path</span> <span class="pre">Layer</span></code> se agregará al panel <span class="guilabel">Capas</span>. Verá que esta ruta sigue la red en vez de conectar el origen y destino con una línea recta. La razón que ejecutamos el algoritmo en 1 para es para identificar fácilemente los valores parámetro que podemos usar en nuestro script. Seleccione ambos <code class="docutils literal"><span class="pre">Hub</span> <span class="pre">lines</span></code> y <code class="docutils literal"><span class="pre">Shortest</span> <span class="pre">Path</span> <span class="pre">layer</span></code>, clic-derecho y seleccione <span class="guilabel">Quitar capa</span>. Clic el botón <span class="guilabel">Historia</span> en la <span class="guilabel">Caja de herramientas Procesos</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/2212.png" class="align-center" src="../../_images/2212.png" />
</div></blockquote>
<ol class="arabic simple" start="23">
<li><p class="first">Elija el algoritmo más arriba y verá el comando completo mostrado en el panel abajo. Copie el comando y clic en <span class="guilabel">Cerrar</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/2311.png" class="align-center" src="../../_images/2311.png" />
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p class="first">Vaya a <span class="menuselection">Complementos ‣ Consola de Python</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/248.png" class="align-center" src="../../_images/248.png" />
</div></blockquote>
<ol class="arabic simple" start="25">
<li><p class="first">Clic el botón <span class="guilabel">Mostrar Editor</span> en la <span class="guilabel">Consola de Python</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/256.png" class="align-center" src="../../_images/256.png" />
</div></blockquote>
<ol class="arabic simple" start="26">
<li><p class="first">En la ventana de editor, copie/pegue el siguiente script. Este script usa los valores de parámetro de la historia de procesamiento que vimos más antes. Clic en el botón <span class="guilabel">Ejecutar Script</span> para iniciar la ejecución.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/266.png" class="align-center" src="../../_images/266.png" />
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">origin_layer</span> <span class="o">=</span>  <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="s1">&#39;origin_points&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">destination_layer</span> <span class="o">=</span>  <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="s1">&#39;destination_points&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">matrix</span> <span class="o">=</span>  <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">mapLayersByName</span><span class="p">(</span><span class="s1">&#39;nearest_destinations&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">matrix</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">():</span>
    <span class="n">origin_expr</span> <span class="o">=</span> <span class="n">QgsExpression</span><span class="p">(</span><span class="s1">&#39;OBJECTID={}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;origin_id&#39;</span><span class="p">]))</span>
    <span class="n">destination_expr</span> <span class="o">=</span> <span class="n">QgsExpression</span><span class="p">(</span><span class="s1">&#39;OBJECTID={}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;destination_id&#39;</span><span class="p">]))</span>
    <span class="n">origin_feature</span> <span class="o">=</span> <span class="n">origin_layer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">(</span><span class="n">QgsFeatureRequest</span><span class="p">(</span><span class="n">origin_expr</span><span class="p">))</span>
    <span class="n">origin_coords</span> <span class="o">=</span>  <span class="p">[(</span><span class="n">f</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">asPoint</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">f</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">asPoint</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">origin_feature</span><span class="p">]</span>
    <span class="n">destination_feature</span> <span class="o">=</span> <span class="n">destination_layer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">(</span><span class="n">QgsFeatureRequest</span><span class="p">(</span><span class="n">destination_expr</span><span class="p">))</span>
    <span class="n">destination_coords</span> <span class="o">=</span>  <span class="p">[(</span><span class="n">f</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">asPoint</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">f</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">asPoint</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">destination_feature</span><span class="p">]</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;INPUT&#39;</span><span class="p">:</span><span class="s1">&#39;Street_Centerlines&#39;</span><span class="p">,</span>
        <span class="s1">&#39;START_POINT&#39;</span><span class="p">:</span><span class="s1">&#39;{},{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">origin_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">origin_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span>
        <span class="s1">&#39;END_POINT&#39;</span><span class="p">:</span><span class="s1">&#39;{},{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">destination_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">destination_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span>
        <span class="s1">&#39;STRATEGY&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;ENTRY_COST_CALCULATION_METHOD&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;DIRECTION_FIELD&#39;</span><span class="p">:</span><span class="s1">&#39;DIRECTIONA&#39;</span><span class="p">,</span>
        <span class="s1">&#39;VALUE_FORWARD&#39;</span><span class="p">:</span><span class="s1">&#39;One Way (Digitizing direction)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;VALUE_BACKWARD&#39;</span><span class="p">:</span><span class="s1">&#39;One way (Against digitizing direction)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;VALUE_BOTH&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;DEFAULT_DIRECTION&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
        <span class="s1">&#39;SPEED_FIELD&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>
        <span class="s1">&#39;DEFAULT_SPEED&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
        <span class="s1">&#39;TOLERANCE&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;OUTPUT&#39;</span><span class="p">:</span><span class="s1">&#39;memory:&#39;</span><span class="p">}</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Executing analysis&#39;</span><span class="p">)</span>
    <span class="n">processing</span><span class="o">.</span><span class="n">runAndLoadResults</span><span class="p">(</span><span class="s2">&quot;qneat3:shortestpathpointtopoint&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="27">
<li><p class="first">Este script tomará unos pocos minutos para ejecutarse. Una vez terminado, verá 9 nuevas capas llamadas <code class="docutils literal"><span class="pre">Shortest</span> <span class="pre">Path</span> <span class="pre">layer</span></code>. Fusionemos estas rutas en una sola capa. Encuentre el algoritmo <span class="menuselection">Vector general ‣ Fusionar capas vector</span> e inícielo.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/276.png" class="align-center" src="../../_images/276.png" />
</div></blockquote>
<ol class="arabic simple" start="28">
<li><p class="first">Seleccione todas las 9 <code class="docutils literal"><span class="pre">capa</span> <span class="pre">Ruta</span> <span class="pre">Más</span> <span class="pre">Corta</span></code> como <span class="guilabel">Capas de entrada</span>. Clic en <span class="guilabel">Ejecutar</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/286.png" class="align-center" src="../../_images/286.png" />
</div></blockquote>
<ol class="arabic simple" start="29">
<li><p class="first">Se creará una nueva capa <code class="docutils literal"><span class="pre">Merged</span></code> que contendrá la ruta más corta entre nuestros orígenes y destinos.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/295.png" class="align-center" src="../../_images/295.png" />
</div></blockquote>
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Ujaval Gandhi.<br/>
      Actualizado por última vez en Nov 03, 2020.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/origin_destination_matrix.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>