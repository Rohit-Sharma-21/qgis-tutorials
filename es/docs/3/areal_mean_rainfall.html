<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Calcular la Precipitación Media de Área (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="Iniciándote con la Programación Python (QGIS3)" href="getting_started_with_pyqgis.html" />
    <link rel="prev" title="Análisis de Área de Servicio usando Openrouteservice (QGIS3)" href="service_area_analysis.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/logo.png"></span>
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Haciendo un Mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Trabajando con atributos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importar Hojas de Cálculo o archivos CSV (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Estilo Básico Vectorial (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Calcular Longitudes y Estadísticas de Línea (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Estilos y Análisis Básicos Ráster (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mosaicar y Recortar Ráster (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_terrain.html">Trabajar con Datos de Terreno</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Trabajar con Datos WMS (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Trabajar con Proyecciones (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenciar Hojas Topográficas y Mapas Escaneados (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferenciar Imágenes Aéreas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digitizing_basics.html">Digitalizar Datos del Mapa</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Realizar Uniones de Tablas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Realizar Uniones Espaciales (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Crear Mapas de Calor (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animar Datos de Series de Tiempo (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Manejar Geometrías No Válidas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Realizar Consultas Espaciales (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Análisis del Vecino Más Cercano (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Muestrear Datos Ráster usando Puntos o Polígonos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interpolating_point_data.html">Interpolar Datos Punto</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Procesamiento por Lotes usando el Marco de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automatizar Flujos de Trabajo Complejos usando el Modelador de Procesos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automatización de la creación de mapas con el Atlas de diseñador de impresiones  (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Análisis de Sobreposición Multicriterio (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Visualización y Enrutamiento Básico de Red (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Localizando la Instalación Más Cercana con Matriz Origen-Destino (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Análisis de Área de Servicio usando Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Calcular la Precipitación Media de Área (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Iniciándote con la Programación Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Ejecutar Algoritmos de Procesamiento vía Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Construyendo un Complemento Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Construyendo un Complemento de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Usando Funciones de Expresión Python Personalizadas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Escribir Scripts Python para el Marco de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Ejecutar y Programar Trabajos de Procesamiento QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performing_table_joins_pyqgis.html">Realizar Uniones de Tabla (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creando Mapas Base con QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Usar Complementos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Buscando y descargando datos de OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">Recursos de aprendizaje QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Créditos de los Datos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Procesamiento por Lotes usando el Marco de Procesamiento (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="service_area_analysis.html" title="Previous Chapter: Análisis de Área de Servicio usando Openrouteservice (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Análisis de Á...</span>
    </a>
  </li>
  <li>
    <a href="getting_started_with_pyqgis.html" title="Next Chapter: Iniciándote con la Programación Python (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Iniciándote c... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts Academy</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<!-- EmailOctopus Form -->

<link rel="stylesheet"
      href="https://emailoctopus.com/bundles/emailoctopuslist/css/1.6/form.css"
>
<div class="emailoctopus-form-wrapper emailoctopus-form-default null"
     style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; color: rgb(26, 26, 26);"
>
  <p class="emailoctopus-heading">
    Subscribe to my newsletter
  </p>
  <p class="emailoctopus-success-message">
  </p>
  <p class="emailoctopus-error-message">
  </p>
  <form action="https://emailoctopus.com/lists/7325d131-1dbb-11eb-a3d0-06b4694bee2a/members/embedded/1.3/add"
        method="post"
        data-message-success="Thanks for subscribing!"
        data-message-missing-email-address="Your email address is required."
        data-message-invalid-email-address="Your email address looks incorrect, please try again."
        data-message-bot-submission-error="This doesn't look like a human submission."
        data-message-consent-required="Please check the checkbox to indicate your consent."
        data-message-invalid-parameters-error="This form has missing or invalid fields."
        data-message-unknown-error="Sorry, an unknown error has occurred. Please try again later."
        class="emailoctopus-form"
  >
    <div class="emailoctopus-form-row">
      <label for="field_0">
        Email address
      </label>
      <input id="field_0"
             name="field_0"
             type="email"
             placeholder
             required="required"
      >
    </div>
    <div aria-hidden="true"
         class="emailoctopus-form-row-hp"
    >
      <input type="text"
             name="hpc4b27b6e-eb38-11e9-be00-06b4694bee2a"
             tabindex="-1"
             autocomplete="nope"
      >
    </div>
    <div class="emailoctopus-form-row-subscribe">
      <input type="hidden"
             name="successRedirectUrl"
      >
      <button type="submit"
              style="background-color: rgb(224, 224, 224); color: rgb(0, 0, 0); font-family: inherit;"
      >
        Subscribe
      </button>
    </div>
  </form>
</div>
<script src="https://emailoctopus.com/bundles/emailoctopuslist/js/1.6/form-embed.js">
</script>

<hr>


<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="fa">Persian</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="calculating-areal-mean-rainfall-qgis3">
<h1>Calcular la Precipitación Media de Área (QGIS3)<a class="headerlink" href="#calculating-areal-mean-rainfall-qgis3" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Calculation of water balance, flood modeling, runoff forecasting, climate studies etc. often need the average depth of rainfall in a hydrological basin as an input - which is also called Areal Precipitation or Areal Mean Rainfall (AMR).</p>
<p>El cálculo de la PMA puede realizarse usando datos de pluviómetro. Usando la ubicación del pluviómetro y la precipitación observada, se puede estimar la precipitación promedio un una ubicación dada usando cualquiera de las técnicas siguientes:</p>
<ol class="arabic simple">
<li><p><strong>Media Aritmética</strong>: Se puede simplemente tomar un promedio de todos los valores observados. Este método asume que el campo de lluvias es homogéneo y que las observaciones de pluviómetro son independientes y da peso igual a todos los pluviómetros.</p></li>
<li><p><strong>Polígono de Thiessen</strong>: Este método divide el área usando polígonos de Thiessen con la suposición de que la precipitación es homogénea dentro del área de cobertura de cada estación. Este método también es llamado una media ponderada por área. Estas suposiciones son buenas para terreno bajo o plano, pero no son apropiadas para terreno montañoso.</p></li>
<li><p><strong>Método Isoyético</strong>: Esta técnica de interpolación calcula Isoyetas - líneas que unen precipitación igual. Asume que la lluvia entre 2 isoyetas es homogénea. Este método es adecuado cuando la red de pluviómetros es densa.</p></li>
<li><p><strong>Ponderación/Cuadriculado de Distancia</strong> - Esta es una técnica de interpolación donde un grid ráster es creado y un valor para cada píxel es estimado en base a la distancia a las estaciones. Una vez que todos los puntos grid han sido estimados, ellos son sumados y la suma es dividida por el número de celdas grid para obtener la precipitación media de área.</p></li>
<li><p><strong>Métodos Geoestadísticos</strong>: La lluvia es influenciada fuertemente por factores locales - como la elevación. Usando técnicas de regresión multivariada o Kriging, se puede tomar en cuenta la autocorrelación espacial y puede alcanzar mejor exactitud. Estos métodos son apropiados cuando la distribución de las estaciones pluviómetro es uniforme y densa.</p></li>
</ol>
<p>En este tutorial aprenderemos el flujo de trabajo QGIS para calcular Precipitación Media de Área, usando el método <strong>Polígono Thiessen</strong>.</p>
<section id="overview-of-the-task">
<h2>Vista general de la tarea<a class="headerlink" href="#overview-of-the-task" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En este tutorial, tomaremos la precipitación medida por las estaciones de la Red Histórica Global de Climatología (GHCN) y calcularemos la Precipitación Media de Área en cada cuenca hidrológica en el estado de Florida.</p>
</section>
<section id="other-skills-you-will-learn">
<h2>Otras habilidades que aprenderá<a class="headerlink" href="#other-skills-you-will-learn" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><p>Cómo quitar datos con valores Nulos.</p></li>
<li><p>Cómo corregir geometrías no válidas en una capa.</p></li>
<li><p>Cómo revisar su Historia de Procesamiento y volver a ejecutar una herramienta con los mismos parámetros.</p></li>
<li><p>Cómo disolver polígonos y resumir estadísticas.</p></li>
<li><p>Cómo usar solo objetos espaciales seleccionados en algoritmos de Procesamiento.</p></li>
</ul>
</section>
<section id="get-the-data">
<h2>Obtener los datos<a class="headerlink" href="#get-the-data" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Usaremos las capas de datos <a href="#id1"><span class="problematic" id="id2">`</span></a>NOAA Climate data <a href="#id3"><span class="problematic" id="id4">`</span></a>_ , <a href="#id5"><span class="problematic" id="id6">`</span></a>HydroSHEDS <a href="#id7"><span class="problematic" id="id8">`</span></a>_ y <a href="#id9"><span class="problematic" id="id10">`</span></a>US Census Bureau Cartographic Boundary <a href="#id11"><span class="problematic" id="id12">`</span></a>_.</p>
<section id="station-wise-precipitation">
<h3>Precipitación por Estación<a class="headerlink" href="#station-wise-precipitation" title="Enlazar permanentemente con este título">¶</a></h3>
<ol class="arabic simple">
<li><p>Vaya al sitio web <a href="#id1"><span class="problematic" id="id2">`</span></a>NOAA Climate data <a href="#id3"><span class="problematic" id="id4">`</span></a>_. Clic en la herramienta Search.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd01.png" class="align-center" src="../../_images/cd01.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Seleccione <code class="docutils literal notranslate"><span class="pre">Global</span> <span class="pre">Summary</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">Month</span></code> en <span class="guilabel">Select weather Observation Type/Dataset</span>, luego en <span class="guilabel">Select Date Range</span> elija Julio 2020, en <span class="guilabel">Search For</span> seleccione <code class="docutils literal notranslate"><span class="pre">States</span></code>, en <span class="guilabel">Enter a Search Term</span> escriba <code class="docutils literal notranslate"><span class="pre">Florida</span></code>. Clic <span class="guilabel">Search</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd02.png" class="align-center" src="../../_images/cd02.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Clic <span class="guilabel">Add To Cart</span>. En elementos, clic  <span class="guilabel">View Items</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd03.png" class="align-center" src="../../_images/cd03.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Cámbiese a <span class="guilabel">Custom Global Summary of the Month CSV</span>. Clic en <span class="guilabel">Continuar</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd04.png" class="align-center" src="../../_images/cd04.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Marque <span class="guilabel">Geographic Locations</span> y en <span class="guilabel">Select data types for custom output</span>, expanda <code class="docutils literal notranslate"><span class="pre">Precipitation`,</span> <span class="pre">seleccione</span> <span class="pre">``Precipitation</span> <span class="pre">(PRCP)</span></code>. Clic <span class="guilabel">Continue</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd05.png" class="align-center" src="../../_images/cd05.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Ingrese la dirección de correo y clic <span class="guilabel">SUBMIT ORDER</span> para descargar los datos.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd06.png" class="align-center" src="../../_images/cd06.png" />
</div></blockquote>
</section>
<section id="hydrological-basins">
<h3>Cuencas Hidrológicas<a class="headerlink" href="#hydrological-basins" title="Enlazar permanentemente con este título">¶</a></h3>
<ol class="arabic simple">
<li><p>Vaya al <cite>sitio web HydroSHEDS `_ y clic :guilabel:`Download</cite>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/hydrosheds1.png" class="align-center" src="../../_images/hydrosheds1.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Select <span class="menuselection">HydroBASINS ‣ Standard ‣ North America and Caribbean ‣ hybas_na_lev06_v1c.zip</span></p></li>
</ol>
<blockquote>
<div><img alt="../../_images/hydrosheds2.png" class="align-center" src="../../_images/hydrosheds2.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Ingrese la dirección de correo y clic <span class="guilabel">Submit Request</span> para descargar los datos.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/hydrosheds3.png" class="align-center" src="../../_images/hydrosheds3.png" />
</div></blockquote>
</section>
<section id="state-boundaries">
<h3>Límites de Estado<a class="headerlink" href="#state-boundaries" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Visite la página <cite>Cartographic Boundary Files - Shapefile `_. Descargue el archivo ``cb_2018_us_state_500k.zip`</cite> de la sección <em>States</em> .</p>
<p>Para su comodidad, puede descargar directamente una copia de todos los conjuntos de datos de los enlaces abajo:</p>
<p><a href="#id1"><span class="problematic" id="id2">`</span></a>florida_2020_07_prcp <a href="#id3"><span class="problematic" id="id4">`</span></a>_</p>
<p><a href="#id1"><span class="problematic" id="id2">`</span></a>hybas_na_lev06_v1c <a href="#id3"><span class="problematic" id="id4">`</span></a>_</p>
<p><a href="#id1"><span class="problematic" id="id2">`</span></a>cb_2018_us_state_500k <a href="#id3"><span class="problematic" id="id4">`</span></a>_</p>
<p>Fuentes de datos: <a class="reference internal" href="../credits.html#ghcn" id="id2"><span>[GHCN]</span></a>, <a class="reference internal" href="../credits.html#hydrosheds" id="id3"><span>[HYDROSHEDS]</span></a>, <a class="reference internal" href="../credits.html#id1" id="id4"><span>[USCENSUS]</span></a></p>
</section>
</section>
<section id="procedure">
<h2>Procedimiento<a class="headerlink" href="#procedure" title="Enlazar permanentemente con este título">¶</a></h2>
<ol class="arabic simple">
<li><p>Abra QGIS y clic en <span class="guilabel">Abrir Administrador de Fuentes de datos</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/01.png" src="../../_images/01.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>In the <span class="guilabel">Data Source Manager</span> dialog box, switch to <span class="guilabel">Delimited Text</span>. Click on the <code class="docutils literal notranslate"><span class="pre">…</span></code>  in <span class="guilabel">File name</span> then browse and select the <code class="docutils literal notranslate"><span class="pre">florida_2020_07_prcp.csv</span></code> file.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/02.png" src="../../_images/02.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Ahora, bajo <span class="guilabel">Definición de geometría</span>, elija <span class="guilabel">Coordenadas puntos</span>. <span class="guilabel">Campo X</span> y <span class="guilabel">Campo Y</span> deberían ser <span class="guilabel">Longitud</span> y <span class="guilabel">Latitud</span>, respectivamente. Elija el <span class="guilabel">SRC geometría</span> como <span class="guilabel">EPSG 4326 - WGS 84</span>. Clic <span class="guilabel">Añadir</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/03.png" src="../../_images/03.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Ahora se añadirá una nueva capa punto. Clic en el icono <span class="guilabel">Abrir Tabla de atributo</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/04.png" src="../../_images/04.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>En la Tabla de atributos, el campo <span class="guilabel">PRCP</span> representa la cantidad de precipitación en la estación durante julio 2020. También, estos datos son registrados en <em>pulgadas</em>. Note que hay unos pocos valores <code class="docutils literal notranslate"><span class="pre">Nulo</span></code> que pueden causar problemas durante el cálculo. Ordene la columna PRCP, y verá que hay una pequeña fracción del conjunto de datos que es Nulo. Ahora vamos a quitar las estaciones con valores Nulos.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/05.png" src="../../_images/05.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Abra la Caja de Herramientas Procesos yendo a <span class="menuselection">Procesos ‣ Caja de herramientas</span>, y busque y localice el algoritmo <span class="menuselection">Selección vectoial ‣ Extraer por atributo</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/06.png" src="../../_images/06.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>In the <span class="guilabel">Extract by Attribute</span> dialog box, Select the <span class="guilabel">Input layer</span> as <code class="docutils literal notranslate"><span class="pre">florida_2020_07_prcp</span></code>, then choose <code class="docutils literal notranslate"><span class="pre">PRCP</span></code> in <span class="guilabel">Selection attribute</span>, then <code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span> <span class="pre">null</span></code> in <span class="guilabel">Operator</span>. Click on the <code class="docutils literal notranslate"><span class="pre">…</span></code> next to <span class="guilabel">Extracted (attribute)</span>, choose <span class="guilabel">Save to File…</span>, enter the layer name as <code class="docutils literal notranslate"><span class="pre">precipitation_filtered.gpkg</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/07.png" src="../../_images/07.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Now a new layer is added to canvas, turn off the older layer, and you can see the stations with Null values have been removed.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/08.png" src="../../_images/08.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>Now we will generate thiessen polygons from this layer. Open the processing toolbox by going to <span class="menuselection">Processing ‣ Toolbox</span>, and search and locate the <span class="menuselection">Vector Geometry ‣ Voronoi polygon</span> algorithm.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/09.png" src="../../_images/09.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Thiessen polygons represent the area of influence around each point. Every polygon defines the area which is closer to a particular station than any other station. This means the precipitation at any point is assumed to be the same as the nearest station.</p>
</div>
<ol class="arabic simple" start="10">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">precipitation_filtered</span></code> as the <span class="guilabel">Input layer</span>. Since we do not have data for any rain-gauge stations outside the basin boundary, we can add some buffer area. Enter <code class="docutils literal notranslate"><span class="pre">15</span></code> as the <span class="guilabel">Buffer region (% of extent)</span>. Click on the <code class="docutils literal notranslate"><span class="pre">…</span></code> in <span class="guilabel">Voronoi polygons</span> and select <span class="guilabel">Save to File…</span>, then enter the name as <code class="docutils literal notranslate"><span class="pre">thiessen_polygons.gpkg</span></code>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/102.png" src="../../_images/102.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>A new layer <code class="docutils literal notranslate"><span class="pre">thiessen_polygons</span></code> will be added to canvas. Let’s clip this layer to the state boundary. Search for <code class="docutils literal notranslate"><span class="pre">cb_2018_us_state_500k.shp</span></code> file in <span class="guilabel">Browser</span> and drag it to canvas.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/112.png" src="../../_images/112.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>The states layer is in a different CRS than the <em>Project CRS</em>. You will get a prompt with different options for transforming this CRS to the Project CRS. In <span class="guilabel">Select Transformation</span> Dialog box, you can choose the default transformation and click <span class="guilabel">OK</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/122.png" src="../../_images/122.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>We will now clip the <code class="docutils literal notranslate"><span class="pre">thiessen</span> <span class="pre">polygons</span></code> layer to the Florida state boundary. Click on the <span class="guilabel">Select Feature by area or Single Click</span> icon and click over Florida state.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/132.png" src="../../_images/132.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>Open the Processing Toolbox by going to <span class="menuselection">Processing ‣ Toolbox</span>, and search and locate the <span class="menuselection">Vector overlay ‣ Clip</span> algorithm.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/142.png" src="../../_images/142.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>In the <span class="guilabel">Clip</span> dialog box, select the <span class="guilabel">Input layer</span> as <code class="docutils literal notranslate"><span class="pre">thiessen_polygons</span></code>, in the <span class="guilabel">Overlay layer</span> select the <code class="docutils literal notranslate"><span class="pre">cb_2018_us_state_500K</span> <span class="pre">layer</span></code> and check the <span class="guilabel">Selected features only</span> checkbox, then click on the <code class="docutils literal notranslate"><span class="pre">…</span></code> in <span class="guilabel">Clipped</span> and select <span class="guilabel">Save to File…</span> , then enter the name as <code class="docutils literal notranslate"><span class="pre">thiessen_polygons_clipped.gpkg</span></code>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/152.png" src="../../_images/152.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>The clipped thiessen polygons layer <code class="docutils literal notranslate"><span class="pre">thiessen_polygons_clipped</span></code> will be added to the canvas. Turn-off the visibility of all other layers. As our task is to calculate average rainfall over each basin, we will now load the polygons representing basins. Locate the <code class="docutils literal notranslate"><span class="pre">hybas_na_lev06_v1c.shp</span></code> layer from the <span class="guilabel">Browser</span> and add it to the canvas.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/162.png" src="../../_images/162.png" />
</div></blockquote>
<ol class="arabic simple" start="17">
<li><p>You will notice that each basin is covered by many thiessen polygons and each polygon spans multiple basins. To visualise this <span class="guilabel">Open layer styling panel</span> icon and change the <span class="guilabel">Opacity</span> to <code class="docutils literal notranslate"><span class="pre">75%</span></code>. We will now intersect both the layers to cut the thiessen polygons to the boundary of each basin.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/172.png" src="../../_images/172.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>Open the Processing Toolbox by going to <span class="menuselection">Processing ‣ Toolbox</span>, and search and locate the <span class="menuselection">Vector overlay ‣  Intersection</span> algorithm.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/181.png" src="../../_images/181.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>In the <span class="guilabel">Intersection</span> dialog box, select the <span class="guilabel">Input layer</span> as <code class="docutils literal notranslate"><span class="pre">thiessen_polygons_clipped</span></code> and <span class="guilabel">Overlay layer</span> as <code class="docutils literal notranslate"><span class="pre">hybas_na_lev06_v1c</span></code>, then click on the <code class="docutils literal notranslate"><span class="pre">…</span></code> in <span class="guilabel">Intersected</span> and select <span class="guilabel">Save to File…</span> , then enter the name as <code class="docutils literal notranslate"><span class="pre">thiessen_polygons_basin.gpkg</span></code>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/191.png" src="../../_images/191.png" />
</div></blockquote>
<ol class="arabic simple" start="20">
<li><p>The execution will fail with an error message <em>has invalid geometry. Please fix the geometry or change the Processing setting to the “Ignore invalid input features” option.</em>. You can learn more about this error in the <a class="reference internal" href="handling_invalid_geometries.html"><span class="doc">Manejar Geometrías No Válidas (QGIS3)</span></a> tutorial.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/20.png" src="../../_images/20.png" />
</div></blockquote>
<ol class="arabic simple" start="21">
<li><p>To fix the geometries, open the Processing Toolbox by going to <span class="menuselection">Processing ‣ Toolbox</span>, and search and locate the <span class="menuselection">Vector geometry ‣ Fix geometries</span> algorithm.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/211.png" src="../../_images/211.png" />
</div></blockquote>
<ol class="arabic simple" start="22">
<li><p>In the <span class="guilabel">Fix Geometries</span> dialog box select the <span class="guilabel">Input layer</span> as <code class="docutils literal notranslate"><span class="pre">hybas_na_lev06_v1c</span></code> and click on <code class="docutils literal notranslate"><span class="pre">…</span></code> on <span class="guilabel">Fixed geometries</span> and select <span class="guilabel">Save to File…</span>, enter the file name as <code class="docutils literal notranslate"><span class="pre">hybas_na_lev06_v1c_fixed.gpkg</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/22.png" src="../../_images/22.png" />
</div></blockquote>
<ol class="arabic simple" start="23">
<li><p>Now a new layer will be added to canvas. We can now try the intersection again. Instead of running the tool from scratch and filling all the parameters, we can retrieve the pre-filled dialog from <em>Processing History</em> and modify only the Overlay layer. Click <span class="menuselection">Processing ‣ History</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/23.png" src="../../_images/23.png" />
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p>Double-click on the <em>native:intersection</em> algorithm from the list.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/24.png" src="../../_images/24.png" />
</div></blockquote>
<ol class="arabic simple" start="25">
<li><p>Change the <span class="guilabel">Overlay layer</span> to <code class="docutils literal notranslate"><span class="pre">hybas_na_lev06_v1c_fixed</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/25.png" src="../../_images/25.png" />
</div></blockquote>
<ol class="arabic simple" start="26">
<li><p>Now a new layer will be loaded, and you can see the <code class="docutils literal notranslate"><span class="pre">thiessen_polygons_basin</span></code> is clipped based on the basin boundary.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/26.png" src="../../_images/26.png" />
</div></blockquote>
<ol class="arabic simple" start="27">
<li><p>Now, let’s calculate the average rainfall value from the thiessen polygons for each basin. This is done using the <code class="docutils literal notranslate"><span class="pre">Aggregate</span></code> tool which allows us to dissolve individual polygons while calculating statistics on the attribute values. Now, open the Processing Toolbox by going to <span class="menuselection">Processing ‣ Toolbox</span>, and search and locate the :menuselection:<a href="#id5"><span class="problematic" id="id6">`</span></a>Vector geometry –&gt; Aggregate`algorithm.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/27.png" src="../../_images/27.png" />
</div></blockquote>
<ol class="arabic simple" start="28">
<li><p>In the <span class="guilabel">Aggregate</span> dialog box choose <span class="guilabel">Input layer</span> as <code class="docutils literal notranslate"><span class="pre">thiessen_polygons_basin</span></code>, select all fields except <code class="docutils literal notranslate"><span class="pre">PRCP</span></code> and <code class="docutils literal notranslate"><span class="pre">HYBAS_ID</span></code> and click <span class="guilabel">Delete selected field</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/28.png" src="../../_images/28.png" />
</div></blockquote>
<ol class="arabic simple" start="29">
<li><p>In <span class="guilabel">Group by expression</span> select <code class="docutils literal notranslate"><span class="pre">HYBAS_ID</span></code>. This means that the tool will dissolve all polygons that have the same value of <code class="docutils literal notranslate"><span class="pre">HYBAS_ID</span></code>. In our case, these will be all thiessen polygons falling a basin. In the <span class="guilabel">Aggregates</span> section, we can configure how different field values will be aggregated from all polygons that gets dissolved. For <span class="guilabel">PRCP</span>, click on the <span class="guilabel">expression</span> button to enter the below expression. The expression calculates the area-weighted fraction for each polygon. Set the <span class="guilabel">Aggregate Function</span> to <code class="docutils literal notranslate"><span class="pre">sum</span></code>, which will sum up all the area-weighted fractions resulting in the area-weighted mean. For <span class="guilabel">HYBAS_ID</span>, change the <span class="guilabel">Aggregate Function</span> to <code class="docutils literal notranslate"><span class="pre">first_value</span></code>. Since we are grouping all thiessen polygons by their HYBAS_ID, all the values will be the same and the <em>first_value</em> function will use the attribute value from the first polygon in each basin. Click on <code class="docutils literal notranslate"><span class="pre">…</span></code> on <span class="guilabel">Aggregated</span> and select the <span class="guilabel">Save to File…</span>, enter the file name as <code class="docutils literal notranslate"><span class="pre">areal_mean_rainfall.gpkg</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(PRCP * $area) / sum($area)
</pre></div>
</div>
<img alt="../../_images/29.png" src="../../_images/29.png" />
</div></blockquote>
<ol class="arabic simple" start="30">
<li><p>A new layer will be added to canvas, lets open the Attribute table to explore. Click on the <span class="guilabel">Open Attribute Table</span> icon.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/30.png" src="../../_images/30.png" />
</div></blockquote>
<ol class="arabic simple" start="31">
<li><p>The field <span class="guilabel">PRCP</span> contains the areal mean rainfall for each basin in inches.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/311.png" src="../../_images/311.png" />
</div></blockquote>
</section>
</section>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Ujaval Gandhi.<br/>
      Actualizado por última vez en jun. 03, 2021.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.1.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/areal_mean_rainfall.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>