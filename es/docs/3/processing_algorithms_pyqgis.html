<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Ejecutar Algoritmos de Procesamiento vía Python (QGIS3) &mdash; QGIS Tutorials and Tips</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="QGIS Tutorials and Tips" href="../../index.html" />
    <link rel="next" title="Construyendo un Complemento Python (QGIS3)" href="building_a_python_plugin.html" />
    <link rel="prev" title="Iniciándote con la Programación Python (QGIS3)" href="getting_started_with_pyqgis.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><img src="../../_static/logo.png">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Haciendo un Mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Trabajando con atributos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importando Hojas de Cálculo o archivos CSV (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Estilo Básico Vectorial (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Calcular Longitudes y Estadísticas de Línea (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Estilos y Análisis Básicos Ráster (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mosaicar y Recortar Ráster (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_terrain.html">Trabajar con Datos de Terreno</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_wms.html">Trabajando con datos WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_projections.html">Trabajar con Proyecciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenciar Hojas Topografícas y Mapas Escaneados (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferenciar Imágenes Aéreas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digitizing_basics.html">Digitalizar Datos del Mapa</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Realizar Uniones de Tablas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Realizar Uniones Espaciales (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Crear Mapas de Calor (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animar Datos de Series de Tiempo (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Manejar Geometrías No Válidas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Realizar Consultas Espaciales (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Análisis del vecino más cercano (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Muestrear Datos Ráster usando Puntos o Polígonos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interpolating_point_data.html">Interpolar Datos Punto</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Procesamiento por Lotes usando el Marco de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automatizar Flujos de Trabajo Complejos usando el Modelador de Procesos (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automatización de la creación de mapas con el Atlas de diseñador de impresiones  (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Análisis de Sobreposición Multicriterio (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Visualización y Enrutamiento Básico de Red (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Localizando la Instalación Más Cercana con Matriz Origen-Destino (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Análisis de Área de Servicio usando Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_qgis_browser.html">Usando QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../open_bil_bip_bsq_files.html">Abrir archivos BIL, BIP o BSQ en QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Iniciándote con la Programación Python (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Ejecutar Algoritmos de Procesamiento vía Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Construyendo un Complemento Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Construyendo un Complemento de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Usando Funciones de Expresión Python Personalizadas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Escribir Scripts Python para el Marco de Procesamiento (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Ejecutar y Programar Trabajos de Procesamiento QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performing_table_joins_pyqgis.html">Realización de uniones de tabla (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web_mapping_with_qgis2web.html">Mapeo web con QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creando Mapas Base con QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_plugins.html">Uso de complementos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Buscando y descargando datos de OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">Recursos de aprendizaje QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Créditos de los Conjuntos de Datos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Procesamiento por Lotes usando el Marco de Procesamiento (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="getting_started_with_pyqgis.html" title="Previous Chapter: Iniciándote con la Programación Python (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Iniciándote c...</span>
    </a>
  </li>
  <li>
    <a href="building_a_python_plugin.html" title="Next Chapter: Construyendo un Complemento Python (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Construyendo ... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>I have several full-length QGIS courses that are now completely free for self-study. 
Check out the <a href="https://courses.spatialthoughts.com/" target="_blank">Course Materials</a>.</p>

<hr>
<!-- EmailOctopus Form -->

<link rel="stylesheet"
      href="https://emailoctopus.com/bundles/emailoctopuslist/css/1.6/form.css"
>
<div class="emailoctopus-form-wrapper emailoctopus-form-default null"
     style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; color: rgb(26, 26, 26);"
>
  <h2 class="emailoctopus-heading">
    Subscribe to my list
  </h2>
  <p class="emailoctopus-success-message">
  </p>
  <p class="emailoctopus-error-message">
  </p>
  <form action="https://emailoctopus.com/lists/7325d131-1dbb-11eb-a3d0-06b4694bee2a/members/embedded/1.3/add"
        method="post"
        data-message-success="Thanks for subscribing!"
        data-message-missing-email-address="Your email address is required."
        data-message-invalid-email-address="Your email address looks incorrect, please try again."
        data-message-bot-submission-error="This doesn't look like a human submission."
        data-message-consent-required="Please check the checkbox to indicate your consent."
        data-message-invalid-parameters-error="This form has missing or invalid fields."
        data-message-unknown-error="Sorry, an unknown error has occurred. Please try again later."
        class="emailoctopus-form"
  >
    <div class="emailoctopus-form-row">
      <label for="field_0">
        Email address
      </label>
      <input id="field_0"
             name="field_0"
             type="email"
             placeholder
             required="required"
      >
    </div>
    <div aria-hidden="true"
         class="emailoctopus-form-row-hp"
    >
      <input type="text"
             name="hpc4b27b6e-eb38-11e9-be00-06b4694bee2a"
             tabindex="-1"
             autocomplete="nope"
      >
    </div>
    <div class="emailoctopus-form-row-subscribe">
      <input type="hidden"
             name="successRedirectUrl"
      >
      <button type="submit"
              style="background-color: rgb(224, 224, 224); color: rgb(0, 0, 0); font-family: inherit;"
      >
        Subscribe
      </button>
    </div>
  </form>
</div>
<script src="https://emailoctopus.com/bundles/emailoctopuslist/js/1.6/form-embed.js">
</script>

<hr>


<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>
        </div>
      </div>
    <div class="col-md-9">
      

  <div class="section" id="running-processing-algorithms-via-python-qgis3">
<h1>Ejecutar Algoritmos de Procesamiento vía Python (QGIS3)<a class="headerlink" href="#running-processing-algorithms-via-python-qgis3" title="Enlazar permanentemente con este título">¶</a></h1>
<p>La Caja de Herramientas Procesos en QGIS contiene una colección siempre creciente de herramientas de geoprocesamiento. La caja de herramientas provee un interfaz sencillo de procesamiento por lotes que ejecuta cualquier algoritmo en un gran número de entradas. Vea <a class="reference internal" href="batch_processing.html"><em>Procesamiento por Lotes usando el Marco de Procesamiento (QGIS3)</em></a>. Pero hay casos donde necesita incorporar un poco más de lógica personalizada en su procesamiento por lotes. Como todos los algoritmos de procesamiento pueden ser ejecutados programáticamente vía la API Python, usted puede ejecutarlos vía la Consola de Python. Este tutorial muestra cómo ejecutar una algoritmo de procesamiento vía la Consola de Python para realizar una tarea de geoprocesamiento personalizada en solo una pocas líneas de código. Por favor revise el tutorial <a class="reference internal" href="getting_started_with_pyqgis.html"><em>Iniciándote con la Programación Python (QGIS3)</em></a> para familiarizarse con lo básico del ambiente de Script Python en QGIS.</p>
<div class="section" id="overview-of-the-task">
<h2>Vista general de la Tarea<a class="headerlink" href="#overview-of-the-task" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Usaremos 12 capas ráster grid que representan la precipitación para cada mes del año y calcularemos la precipitación mensual promedio para todos los códigos zip en el área de Seattle.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Otras habilidades que aprenderá<a class="headerlink" href="#other-skills-you-will-learn" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p class="first">Cómo borrar una columna (i.e., campo) de una capa vectorial</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Obtener los datos<a class="headerlink" href="#get-the-data" title="Enlazar permanentemente con este título">¶</a></h2>
<p><a class="reference external" href="http://www.prism.oregonstate.edu/">El Grupo de Clima PRISM</a> reune observación del clima y provee datos históricos y actuales del clima para los estados contiguos de EE.UU. Diríjase a la página de datos <a class="reference external" href="http://www.prism.oregonstate.edu/recent/">Años Recientes</a> y descargue los datos mensuales de precipitación para el año 2017 en formato BIL.</p>
<img alt="../../_images/data14.png" class="align-center" src="../../_images/data14.png" />
<p>El <a class="reference external" href="https://data.seattle.gov/">portal de Datos Abiertos de la Ciudad de Seattle</a> provee datos libres y abiertos para la ciudad. Busque y descargue los datos de <a class="reference external" href="https://data.seattle.gov/Land-Base/Zip-Codes/n58k-cykw">Códigos Zip</a> en formato de archivo shape.</p>
<p>Para su comodidad, puedes descargar directamente una copia de ambos conjuntos de datos desde los enlaces abajo:</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/PRISM_ppt_stable_4kmM3_2017_all_bil.zip">PRISM_ppt_stable_4kmM3_2017_all_bil.zip</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/Zip_Codes.zip">Zip_Codes.zip</a></p>
<p>Fuente de Datos <a class="reference internal" href="../credits.html#prism" id="id1">[PRISM]</a> <a class="reference internal" href="../credits.html#cityofseattle" id="id2">[CITYOFSEATTLE]</a></p>
</div>
<div class="section" id="procedure">
<h2>Procedimiento<a class="headerlink" href="#procedure" title="Enlazar permanentemente con este título">¶</a></h2>
<ol class="arabic simple">
<li><p class="first">Descomprima el archivo <code class="docutils literal"><span class="pre">PRISM_ppt_stable_4kmM3_2017_all_bil.zip</span></code>. Ubique la carpeta <code class="docutils literal"><span class="pre">PRISM_ppt_stable_4kmM3_2017_all_bil</span></code> en el Explorador QGIS y expándalo. La carpeta contiene 12 capas individuales para cada mes. Mantenga presionala la tecla <code class="kbd docutils literal"><span class="pre">Ctrl</span></code> y seleccione los archivos <code class="docutils literal"><span class="pre">.bil</span></code> para todos los 12 meses. Una vez seleccionado, arrástrelos a la pantalla.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1105.png" class="align-center" src="../../_images/1105.png" />
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Los datos son provistos en el  <a class="reference external" href="http://desktop.arcgis.com/en/arcmap/10.3/manage-data/raster-and-images/bil-bip-and-bsq-raster-files.htm">formato BIL</a>. Cada capa es presentada con un conjunto de archivos <code class="docutils literal"><span class="pre">.bil</span></code> que contienen los datos efectivos, un archivo <code class="docutils literal"><span class="pre">.hdr</span></code> que describe la estructura de los datos y un archivo <code class="docutils literal"><span class="pre">.prj</span></code> que contiene la información de proyección. QGIS puede cargar el archivo <code class="docutils literal"><span class="pre">.bil</span></code> siempre que los otros archivos existan en el mismo directorio.</p>
</div>
<ol class="arabic simple" start="2">
<li><p class="first">A continuación, descomprima el archivo <code class="docutils literal"><span class="pre">Zip_Codes.zip</span></code> y extraiga el archivo shape a una carpeta. Localice la carpeta <code class="docutils literal"><span class="pre">Zip_Codes</span></code> y expándala. Arrastre el archivo <code class="docutils literal"><span class="pre">Zip_Codes.shp</span></code> a la pantalla.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/258.png" class="align-center" src="../../_images/258.png" />
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">The unzip step is important because the Zonal Statistics algorithm works by adding a new field to the layer. If the layer is zipped, QGIS cannot update the layer.</p>
</div>
<ol class="arabic simple" start="3">
<li><p class="first">Clic-derecho en la capa <code class="docutils literal"><span class="pre">Zip_Codes</span></code> y seleccione <span class="guilabel">Zoom a la Capa</span>. Verá los polígonos de código zip para la ciudad de Seattle y áreas vecinas.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/336.png" class="align-center" src="../../_images/336.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p class="first">Vaya a <span class="menuselection">Procesos ‣ Caja de herramientas</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/421.png" class="align-center" src="../../_images/421.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p class="first">El algoritmo para muestrear una capa ráster usando polígonos vectoriales es conocido como <code class="docutils literal"><span class="pre">Estadísticas</span> <span class="pre">zonales</span></code>. Busque el algoritmo en la <span class="guilabel">Caja de herramientas Procesos</span>. Seleccion el algoritmo y ubique el ratón por encima. Verá un mensaje de herramienta con el texto <em>Algorithm ID: &#8216;qgis:zonalstatistics&#8217;</em>. Anote este id que será necesitado para llamar a este algoritmo mediante la API Python. Haga doble-clic en el algoritmo <code class="docutils literal"><span class="pre">Estadísticas</span> <span class="pre">zonales</span></code> para iniciarlo.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/521.png" class="align-center" src="../../_images/521.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p class="first">Haremos una ejecución manual de prueba del algoritmo para una sola capa. Ésta es una manera útil de revisar si el algoritmo se comporta como se espera y también una manera fácil para averiguar cómo pasar parámetros relevantes al algoritmo cuando se lo usa mediante Python. En el diálogo <span class="guilabel">Zonal statistics</span>, seleccione <code class="docutils literal"><span class="pre">PRISM_ppt_stable_4kmM3_201701_bil</span></code> como la <span class="guilabel">Capa ráster</span> y <code class="docutils literal"><span class="pre">Zip_Codes</span></code> como la <span class="guilabel">Capa vectorial que contiene zonas</span>. Deje los otros parámetros predeterminados. Clic en el botón <span class="guilabel">...</span> junto a <span class="guilabel">Estadísticas a calcular</span> y seleccione sólo <code class="docutils literal"><span class="pre">Media</span></code>. Clic en <span class="guilabel">Ejecutar</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/621.png" class="align-center" src="../../_images/621.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p class="first">Una vez que finalice el algoritmo, cambia a la pestaña <span class="guilabel">Registro</span>. Tome nota de los <span class="guilabel">Parámetros de Entrada</span> que fueron pasados al algoritmo. Clic en <span class="guilabel">Cerrar</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/720.png" class="align-center" src="../../_images/720.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p class="first">Revisemos los resultados de la ejecución de prueba. En la ventana principal QGIS, clic-derecho a la capa <code class="docutils literal"><span class="pre">Zip_Codes</span></code> y seleccione <span class="guilabel">Abrir tabla de atributos</span>. Este algoritmo particular modifica la capa zona de entrada en el lugar y agrega una nueva columna para cada estadística seleccionada. Como habíamos seleccionado sólo el valor <code class="docutils literal"><span class="pre">Media</span></code>, una nueva columna llamada <code class="docutils literal"><span class="pre">_mean</span></code> es agregada a la tabla. El <code class="docutils literal"><span class="pre">_</span></code> fue el prefijo predeterminado. Cuando ejecutamos el algoritmo para capas de cada mes, será útil especificar un prefijo predeterminado con el número de mes de manera que podamos identificar fácilmente los valores medios para cada mes (i.e., 01_mean, 02_mean, etc.). Especificar este prefijo predeterminaod no es posible en el Interfaz de Procesamiento por Lotes de QGIS y si ejecutáramos este comando usando el interfaz, tendríamos que ingresar manualmente el prefijo predeterminado para cada capa. Si está trabajando con un gran número de capas, esto puede ser muy incómodo. Por lo tanto, podemos agregar esta lógica personalizada usando la API Python y ejecutando el algoritmo en un bucle for para cada capa.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/820.png" class="align-center" src="../../_images/820.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p class="first">Antes que procedamos, borremos la columna <code class="docutils literal"><span class="pre">_mean</span></code> que fue creada durante nuestra ejecución de prueba. Clic en el botón <span class="guilabel">modo de Conmutar Edición</span>, seguido por el botón <span class="guilabel">Borrar campo</span>. Seleccione el campo <code class="docutils literal"><span class="pre">_mean</span></code> y clic en <span class="guilabel">Aceptar</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/920.png" class="align-center" src="../../_images/920.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p class="first">Clic el botón <span class="guilabel">Conmutar edición</span> de nuevo y <span class="guilabel">Guardar</span> los cambios.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1020.png" class="align-center" src="../../_images/1020.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p class="first">De vuelta en la ventana principal QGIS, vaya a <span class="menuselection">Complementos ‣ Consola de Python</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1123.png" class="align-center" src="../../_images/1123.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p class="first">Para ejecutar el algoritmo de procesamiento mediante Python, necesitamos acceder a los nombres de todas las capas. Ingrese el siguiente código en la <span class="guilabel">Consola Python</span> y presione <code class="kbd docutils literal"><span class="pre">Intro</span></code>. Verá los nombres de todas las capas impresas en la consola.</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">root</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">layerTreeRoot</span><span class="p">()</span>
<span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">children</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>
</pre></div>
</div>
<img alt="../../_images/121.gif" class="align-center" src="../../_images/121.gif" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p class="first">Para agregar un prefijo personalizado, necesitamos mirar el nombre de la capa y extraer una subcadena que representa el número de mes. Ingrese el siguiente código para iterar sobre todas las capas ráster, extraiga el prefijo personalizado y ejecute el algoritmo <code class="docutils literal"><span class="pre">qgis:zonalstatistics</span></code> usándolo.</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">root</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">layerTreeRoot</span><span class="p">()</span>
<span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">children</span><span class="p">():</span>
  <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;PRISM&#39;</span><span class="p">):</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">()[</span><span class="o">-</span><span class="mi">6</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;INPUT_RASTER&#39;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span> <span class="s1">&#39;RASTER_BAND&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;INPUT_VECTOR&#39;</span><span class="p">:</span> <span class="s1">&#39;Zip_Codes&#39;</span><span class="p">,</span> <span class="s1">&#39;COLUMN_PREFIX&#39;</span><span class="p">:</span> <span class="n">prefix</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;STATS&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
    <span class="n">processing</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;qgis:zonalstatistics&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/131.gif" class="align-center" src="../../_images/131.gif" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p class="first">Una vez que termine el procesamiento, clic-derecho en la capa <code class="docutils literal"><span class="pre">Zip_Codes</span></code> y seleccione <span class="guilabel">Abrir tabla de atributos</span>.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1419.png" class="align-center" src="../../_images/1419.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p class="first">Verá agregadas 12 nuevas columnas a la tabla con prefijos personalizados y valores medios de precipitación extraídos de las capas ráster.</p>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1518.png" class="align-center" src="../../_images/1518.png" />
</div></blockquote>
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Ujaval Gandhi.<br/>
      Actualizado por última vez en Nov 28, 2020.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/processing_algorithms_pyqgis.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>