<!DOCTYPE html>

<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nächster Nachbar Analyse (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="search" title="Suche" href="../../search.html" />
    <link rel="next" title="Stichproben aus Rasterdaten mit Hilfe von Punkten und Polygonen (QGIS3)" href="sampling_raster_data.html" />
    <link rel="prev" title="Räumliche Abfragen ausführen (QGIS3)" href="performing_spatial_queries.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/logo.png"></span>
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Einleitung</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Erstellung einer Karte (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Arbeit mit Attributen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Import von Tabellenblättern oder CSV-Dateien (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Einfache Vektor Gestaltung (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Berechnung der Länge von Linien und Statistiken (QGSI3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Einfache Visualisierung und Analyse von Rasterdaten (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Erstellen und Zuschneiden eines Raster-Mosaiks (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_terrain.html">Working with Terrain Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_wms.html">Working with WMS Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Working with Projections (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenzierung von Kartenblättern und eingescannten Karten (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferenzierung von Luftbildern (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digitizing_basics.html">Digitizing Map Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Tabellen verbinden (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Räumliche Verbindungen erstellen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Heatmaps erstellen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animating Time Series Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Räumliche Abfragen ausführen (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Nächster Nachbar Analyse (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Stichproben aus Rasterdaten mit Hilfe von Punkten und Polygonen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interpolating_point_data.html">Interpolating Point Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Stapelverarbeitung mit dem Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Komplexe Arbeitsabläufe mit Hilfe der Verarbeitungsmodellierung (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automatisierung der Kartenerstellung mit dem Drucklayout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Multi Criteria Overlay Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Einfache Netzwerkvisualisierung und Routing (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Lokalisierung der am nächsten gelegenen Einrichtung mit einer Quelle-Ziel-Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Einzugsgebietsanalyse mit dem Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_qgis_browser.html">Using the QGIS Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../open_bil_bip_bsq_files.html">Open BIL, BIP or BSQ files in QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Mit der Pythonprogrammierung loslegen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Verarbeitungsroutinen mit Python ausführen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Ein Python Plugin erstellen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Ein Verarbeitungsplugin erstellen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Angepasste Python Funktionsausdrücke verwenden (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Pythonscripts für die Verarbeitungswerkzeuge schreiben (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performing_table_joins_pyqgis.html">Performing Table Joins (PyQGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_plugins.html">Verwenden von Erweiterungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Suchen und Laden von OpenStreetMap Daten</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">QGIS Learning Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Data Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="performing_spatial_queries.html" title="Previous Chapter: Räumliche Abfragen ausführen (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Räumliche Abf...</span>
    </a>
  </li>
  <li>
    <a href="sampling_raster_data.html" title="Next Chapter: Stichproben aus Rasterdaten mit Hilfe von Punkten und Polygonen (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Stichproben a... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Check out more QGIS learning materials, including free full-length QGIS courses from <a href="https://spatialthoughts.com/resources" target="_blank">Spatial Thoughts Academy</a>.</p>

<hr>
<!-- EmailOctopus Form -->

<link rel="stylesheet"
      href="https://emailoctopus.com/bundles/emailoctopuslist/css/1.6/form.css"
>
<div class="emailoctopus-form-wrapper emailoctopus-form-default null"
     style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; color: rgb(26, 26, 26);"
>
  <p class="emailoctopus-heading">
    Subscribe to my list
  </p>
  <p class="emailoctopus-success-message">
  </p>
  <p class="emailoctopus-error-message">
  </p>
  <form action="https://emailoctopus.com/lists/7325d131-1dbb-11eb-a3d0-06b4694bee2a/members/embedded/1.3/add"
        method="post"
        data-message-success="Thanks for subscribing!"
        data-message-missing-email-address="Your email address is required."
        data-message-invalid-email-address="Your email address looks incorrect, please try again."
        data-message-bot-submission-error="This doesn't look like a human submission."
        data-message-consent-required="Please check the checkbox to indicate your consent."
        data-message-invalid-parameters-error="This form has missing or invalid fields."
        data-message-unknown-error="Sorry, an unknown error has occurred. Please try again later."
        class="emailoctopus-form"
  >
    <div class="emailoctopus-form-row">
      <label for="field_0">
        Email address
      </label>
      <input id="field_0"
             name="field_0"
             type="email"
             placeholder
             required="required"
      >
    </div>
    <div aria-hidden="true"
         class="emailoctopus-form-row-hp"
    >
      <input type="text"
             name="hpc4b27b6e-eb38-11e9-be00-06b4694bee2a"
             tabindex="-1"
             autocomplete="nope"
      >
    </div>
    <div class="emailoctopus-form-row-subscribe">
      <input type="hidden"
             name="successRedirectUrl"
      >
      <button type="submit"
              style="background-color: rgb(224, 224, 224); color: rgb(0, 0, 0); font-family: inherit;"
      >
        Subscribe
      </button>
    </div>
  </form>
</div>
<script src="https://emailoctopus.com/bundles/emailoctopuslist/js/1.6/form-embed.js">
</script>

<hr>


<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="fa">Persian</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <div class="section" id="nearest-neighbor-analysis-qgis3">
<h1>Nächster Nachbar Analyse (QGIS3)<a class="headerlink" href="#nearest-neighbor-analysis-qgis3" title="Link zu dieser Überschrift">¶</a></h1>
<p>GIS ist sehr nützlich, um räumliche Beziehungen zwischen Features zu analysieren. Eine solcher Analysen ist die Ermittlung welche Features am nächsten zu einem anderen gegebenen Feature liegen. Es gibt mehrere Wege, solch eine Analyse in QGIS durchzuführen. In dieser Anleitung erkunden wir die Tools  <strong>Abstand zum nächsten Knoten</strong> und <strong>Distanzmatrix</strong>, um die Nächster Nachbar Analyse durchzuführen.</p>
<div class="section" id="overview-of-the-task">
<h2>Aufgabenübersicht<a class="headerlink" href="#overview-of-the-task" title="Link zu dieser Überschrift">¶</a></h2>
<p>Zur gegebenen Lage aller bekannten signifikanten Erdbeben, finden wir den nächsten bewohnten Ort.</p>
<div class="section" id="other-skills-you-will-learn">
<h3>Weitere Fähigkeiten, die wir erlernen.<a class="headerlink" href="#other-skills-you-will-learn" title="Link zu dieser Überschrift">¶</a></h3>
<ul class="simple">
<li><p>Benutzung des <em>Geometriegenerators</em> um dynamisch Linien aus einem Mehrfachpunktlayer zu erzeugen.</p></li>
</ul>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Beschaffung der Daten<a class="headerlink" href="#get-the-data" title="Link zu dieser Überschrift">¶</a></h2>
<p>Als Layer der bedeutenden Erdbeben verwenden wir die Daten <a class="reference external" href="http://www.ngdc.noaa.gov/nndc/struts/form?t=101650&amp;s=1&amp;d=1">Significant Earthquake Database</a> des nationalen geophysikalischen Datenzentrums der NOAA. Lade folgende Daten herunter: <a class="reference external" href="https://www.ngdc.noaa.gov/nndc/struts/results?type_0=Exact&amp;query_0=$ID&amp;t=101650&amp;s=13&amp;d=189&amp;dfn=signif.txt">tab-delimited earthquake data</a>.</p>
<p>Bei Natural Earth findet man einen schönen Datensatz der bewohnten Orte: <a class="reference external" href="http://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-populated-places/">Populated Places</a>. Lade folgenden Datensatz herunter: <a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_populated_places_simple.zip">simple (less columns) dataset</a>.</p>
<p>Der Einfachheit halber können wir beide Datensätze unter folgenden links herunterladen:</p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/signif.txt">signif.txt</a></p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/ne_10m_populated_places_simple.zip">ne_10m_populated_places_simple.zip</a></p>
<p>Datenquelle: <a class="reference internal" href="../credits.html#ngdc" id="id1"><span>[NGDC]</span></a> <a class="reference internal" href="../credits.html#naturalearth" id="id2"><span>[NATURALEARTH]</span></a></p>
</div>
<div class="section" id="procedure">
<h2>Arbeitsablauf<a class="headerlink" href="#procedure" title="Link zu dieser Überschrift">¶</a></h2>
<ol class="arabic simple">
<li><p>Finde die Datei <code class="docutils literal notranslate"><span class="pre">ne_10m_populated_places_simple.zip</span></code> im <span class="guilabel">Browser</span> Bereich und erweitere sie. Ziehe die Datei <code class="docutils literal notranslate"><span class="pre">ne_10m_populated_places_simple.shp</span></code> in den Arbeitsbereich.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1101.png" class="align-center" src="../../_images/1101.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Wir sehen den neuen Layer <code class="docutils literal notranslate"><span class="pre">ne_10m_populated_places_simple</span></code> der im <span class="guilabel">Layer</span> Bereich angezeigt wird. Dieser Layer enthält Punkte für die bewohnten Orte. Jetzt werden wir den Erdbebenlayer laden. Dieser Layer liegt als <em>Tab Serepated Values (TSV)</em> Textdatei vor. Um diese Datei zu laden, klicken wir auf den Knopf <span class="guilabel">Datenquellenverwaltung öffnen</span> in der <span class="guilabel">Datenquellenverwaltungsleiste</span>. Man kann alternativ die Tastenkombination <kbd class="kbd docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ctrl</kbd> <kbd class="kbd docutils literal notranslate"></kbd>+<kbd class="kbd docutils literal notranslate"></kbd> <kbd class="kbd docutils literal notranslate">L</kbd></kbd> verwenden.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/249.png" class="align-center" src="../../_images/249.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Klicke auf den Knopf <span class="guilabel">…</span> neben <span class="guilabel">File name</span> und gehe zu der heruntergeladenen Datei <code class="docutils literal notranslate"><span class="pre">signif.txt</span></code>. Nach dem Laden sollten die Felder <span class="guilabel">Dateiformat</span> und <span class="guilabel">Geometriedefinition</span> automatisch mit den richtigen Werten gefüllt sein. Klicke auf <span class="guilabel">Hinzufügen</span> und danach auf <span class="guilabel">Schließen</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/334.png" class="align-center" src="../../_images/334.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Zoome hinein und untersuche beide Datensätze. Jeder gelbe Punkt steht für ein signifikantes Erdbeben und jeder rote Punkt für einen bewohnten Ort. Unser Ziel ist es, für jeden Punkt aus dem Erdbebenlayer den nächsten Punkt aus dem Layer der bewohnten Orte zu finden.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/418.png" class="align-center" src="../../_images/418.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Bevor wir die Analyse beginnen, müssen wir unsere Eingangsdaten vorbereiten. Der Layer <code class="docutils literal notranslate"><span class="pre">signif</span></code> enthält viele Einträge mit einer ungültigen Geometrie. Diese Einträge wurden mit einer <strong>NULL</strong> Geometrie importiert. Diese Einträge entfernen wir als Erstes. Wir gehen zu <span class="menuselection">Verarbeitung ‣ Werkzeugkiste</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/518.png" class="align-center" src="../../_images/518.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Wir suchen das Werkzeug <span class="menuselection">Vektorgeometrie ‣ Leergeometrien entfernen</span> und klicken doppelt darauf, um es zu staten.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/618.png" class="align-center" src="../../_images/618.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Wähle <code class="docutils literal notranslate"><span class="pre">signif</span></code> als <span class="guilabel">Eingabelayer</span> und klicke auf <span class="guilabel">Starte</span>. Nachdem der Prozess abgeschlossen ist, klicken wir auf <span class="guilabel">Schließen</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/717.png" class="align-center" src="../../_images/717.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Wir sehen nun einen neuen Layer <code class="docutils literal notranslate"><span class="pre">Nicht</span> <span class="pre">leere</span> <span class="pre">Geometrien</span></code> im <span class="guilabel">Layer</span> Bereich. Wir werden diesen Layer anstelle des originalen <code class="docutils literal notranslate"><span class="pre">signif</span></code> Layers für die weiteren Analysen verwenden. Entferne den Haken beim Layer <code class="docutils literal notranslate"><span class="pre">signif</span></code> im <span class="guilabel">Layer</span> Bereich, um ihn auszublenden. Jetzt können wir mit der Nächster Nachbar Analyse beginnen. Suche das Werkzeug <span class="menuselection">Vektoranalyse ‣ Abstand zum nächsten Knoten (Linie zu Knoten)</span> und klicke doppelt darauf, um es zu starten.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/817.png" class="align-center" src="../../_images/817.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Wenn man einen Punktlayer als Ausgabe benötigt, kann man stattdessen das Tool <em>Abstand zum nächsten Knoten (Punkte)</em> verwenden.</p>
</div>
<ol class="arabic simple" start="9">
<li><p>Im Dialogfenster <span class="guilabel">Abstand zum nächsten Knoten (Linie zu Knoten)</span> wählen wir <code class="docutils literal notranslate"><span class="pre">Nicht</span> <span class="pre">leere</span> <span class="pre">Geometrien</span></code> als <span class="guilabel">Quellpunktlayer</span>. Wähle <code class="docutils literal notranslate"><span class="pre">ne_10m_populated_places_simple</span></code> als <span class="guilabel">Zielnabenlayer</span>. Wähle <code class="docutils literal notranslate"><span class="pre">name</span></code> als <span class="guilabel">Nabenlayernamensattribut</span>. Das Tool wird außerdem die Luftliniendistanz zwischen bewohntem Ort und dem nächsten Erdbeben berechnen. Setze <code class="docutils literal notranslate"><span class="pre">Kilometer</span></code> als <span class="guilabel">Maßeinheit</span> ein. Klicke auf <span class="guilabel">Starte</span>. Nachdem der Prozess beendet ist , klicke auf <span class="guilabel">Schließen</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/917.png" class="align-center" src="../../_images/917.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>Zurück im QGIS Hauptfenster sehen wir einen neuen Linienlayer <code class="docutils literal notranslate"><span class="pre">Knotenabstand</span></code> der im <span class="guilabel">Layer</span> Bereich angezeigt wird. Dieser Layer enthält Linienfeatures, die jeden Punkt eines Erdbebens mit der am nächsten gelegenden Ortschaft verbinden. Klicke mit der rechten Maustaste auf den Layer <code class="docutils literal notranslate"><span class="pre">Knotendistanz</span></code> und wähle <span class="guilabel">Attributtabelle öffnen</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1017.png" class="align-center" src="../../_images/1017.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>Wenn man in der Tabelle ganz nach rechts scrollt, sieht man 2 neue Attributspalten: <strong>HubName</strong> und <strong>HubDist</strong>. Dabei handelt es sich um den Namen und den Abstand der am nächsten zu einem Erdbeben gelegenen Ortschaft.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1121.png" class="align-center" src="../../_images/1121.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Unsere Analyse ist nun abgeschlossen. Wir schauen uns jetzt ein anderes Tool an, das etwas ähnliches tut. <strong>Distanzmatrix</strong> ist ein mächtiges Werkzeug, das nicht nur den Abstand zum nächesten Punkt, sondern zu allen Punkten eines anderen Layers bestimmt. Wir können das Tool als Alternative zum Werkzeug <em>Abstand zum nächsten Knoten</em> verwenden. Wir entfernen den Haken beim Layer <code class="docutils literal notranslate"><span class="pre">Knotenabstand</span></code> um ihn auszublenden. Gehe zum Werkzeug <span class="menuselection">Vektoranalyse ‣ Distanzmatrix</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1218.png" class="align-center" src="../../_images/1218.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>Im Dialogfenster <span class="guilabel">Distanzmatrix</span> setzen wir <code class="docutils literal notranslate"><span class="pre">Nicht</span> <span class="pre">leere</span> <span class="pre">Geometrien</span></code> als <span class="guilabel">Eingabepunktlayer</span> und <code class="docutils literal notranslate"><span class="pre">I_D</span></code> als <span class="guilabel">Eindeutiges Schlüsselfeld der Eingabe</span>. Als  <span class="guilabel">Zielpunktlayer</span> verwenden wir <code class="docutils literal notranslate"><span class="pre">ne_10m_populated_places_simple</span></code> und als <span class="guilabel">Eindeutiges Schlüsselfeld des Ziels</span> wählen wir <code class="docutils literal notranslate"><span class="pre">name</span></code>. Als <span class="guilabel">Typ der Ausgabematrix</span> wählen wir <code class="docutils literal notranslate"><span class="pre">Lineare</span> <span class="pre">(N*k</span> <span class="pre">x</span> <span class="pre">3)</span> <span class="pre">Distanzmatrix</span></code>. Entscheidend ist es, den Wert für <span class="guilabel">Nur (k) nächste Zielpunkte verwenden</span> auf <code class="docutils literal notranslate"><span class="pre">1</span></code> zu setzen, damit für die Ausgabe nur der nächste Nachbar ermittelt wird. Klicke auf <span class="guilabel">Starte</span>, um die Distanzmatrix zu berechnen. Klicke nach Ende der Berechnung auf <span class="guilabel">Schließen</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1317.png" class="align-center" src="../../_images/1317.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>Nachdem die Berechnung abgeschlossen wurde, wird ein neuer Layer <code class="docutils literal notranslate"><span class="pre">Distanzmatrix</span></code> geladen. Beachte, dass die Ausgabedatei eine sogenannte <em>MultiPoint</em> Geometrie besitzt. Jedes Feature besteht aus 2 Punkten - Quelle und Ziel. Öffne die <span class="guilabel">Attributtabelle</span> des Layers. Wir sehen, dass für jedes Feature eine Zuordnung des nächsten bewohnten Ortes zu einem Erdbeben erfolgt ist. Beachte, dass die Distanz in einer Einheit entsprechend des KBS des Layers (Grad) angegeben ist.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1416.png" class="align-center" src="../../_images/1416.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>An dieser Stelle können wir die Ausgabedatei in einem Format unserer Wahl speichern. Klicke mit der rechten Maustaste auf den Layer und wähle <span class="menuselection">Exportieren ‣ Objekt speichern als</span>. Zur besseren Visualisierung des Ergebnisses können wir auf einfache Weise eine Nabe-Speiche-Darstellung erzeugen. Klicke mit rechten Maustaste auf den Layer <code class="docutils literal notranslate"><span class="pre">Distanzmatrix</span></code> und wähle <span class="guilabel">Eigenschaften</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1515.png" class="align-center" src="../../_images/1515.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>Wir gehen im Dialogfenster <span class="guilabel">Layereigenschaften</span> zum Punkt <span class="guilabel">Symbolisierung</span> und klicken auf <code class="docutils literal notranslate"><span class="pre">Einfache</span> <span class="pre">Markierung</span></code> und wählen <code class="docutils literal notranslate"><span class="pre">Geometriegenerator</span></code> als <span class="guilabel">Symbollayertyp</span>. Wir stellen <code class="docutils literal notranslate"><span class="pre">LineString</span> <span class="pre">/</span> <span class="pre">MultiLineString</span></code> als <span class="guilabel">Geometrietyp</span> ein und klicken auf den <span class="guilabel">Ausdruck</span> Knopf.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1614.png" class="align-center" src="../../_images/1614.png" />
</div></blockquote>
<ol class="arabic simple" start="17">
<li><p>Hier können wir einen Ausdruck verwenden, der die 2 Punkte der Multi-point-Features mit einer Linie verbindet. Gebe folgenden Ausdruck ein.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make_line(point_n( $geometry, 1), point_n( $geometry, 2))
</pre></div>
</div>
<img alt="../../_images/1715.png" class="align-center" src="../../_images/1715.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>Zurück im <span class="guilabel">Symbolisierungs</span> Bereich können wir den Stil der Linien an unsere Vorstellungen anpassen. Klicke danach auf <span class="guilabel">OK</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1813.png" class="align-center" src="../../_images/1813.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>Wir sehen, dass der Layer <code class="docutils literal notranslate"><span class="pre">Distanzmatrix</span></code> jetzt mit Linien anstelle von Punkten dargestellt wird. Wir brauchten dafür keinen neuen Layer erstellen. Der Layer besteht immer noch aus einer MultiPoint Geometrie. Die Darstellung als Linien erfolgt dynamisch basierend auf dem verwendeten Ausdruck.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1912.png" class="align-center" src="../../_images/1912.png" />
</div></blockquote>
</div>
</div>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Ujaval Gandhi.<br/>
      Zuletzt aktualisiert am Apr. 21, 2021.<br/>
      Mit <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.1 erstellt.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/nearest_neighbor_analysis.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>